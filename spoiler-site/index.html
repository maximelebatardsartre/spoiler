<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#050608" />
  <title>SPOILER — mini-série négociation</title>
  <meta name="description" content="SPOILER — une mini-série sur l'art de la négociation (9 épisodes). Expérience immersive." />

  <link rel="preload" href="assets/fonts/RushinkDemo.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Background: animated layers -->
  <div class="bg" aria-hidden="true">
    <div class="bg__mesh"></div>
    <div class="bg__grain"></div>
    <div class="bg__vignette"></div>
    <div class="bg__floaters" id="floaters"></div>
  </div>

  <!-- Top bar -->
  <header class="topbar" role="banner">
    <button class="brand" id="btnHome" aria-label="Retour à l'accueil">
      <span class="brand__title brush">SPOILER</span>
      <span class="brand__sub">mini-série • négociation</span>
    </button>

    <div class="topbar__center">
      <div class="progress" aria-label="Progression">
        <div class="progress__fill" id="progressBar"></div>
        <div class="progress__meta">
          <span id="progressText">0/9</span>
          <span class="dot">•</span>
          <span id="progressPct">0%</span>
        </div>
      </div>
    </div>

    <div class="topbar__right">
      <a class="linkChip" href="https://www.youtube.com/playlist?list=PLeAQVD0W1xPrSrUlwukrFQHV4qi-3jo52" target="_blank" rel="noreferrer">
        Playlist YouTube
      </a>
      <button class="ghostChip" id="btnReset" title="Réinitialiser la progression">Reset</button>
    </div>
  </header>

  <!-- App -->
  <main class="shell" id="app" role="main">

    <!-- INTRO -->
    <section class="view view--active" id="viewIntro" data-view="intro">
      <div class="intro">
        <div class="intro__hero">
          <div class="intro__kicker">SÉRIE COURTE • 9 ÉPISODES • ~2 MIN</div>
          <h1 class="intro__title brush">SPOILER</h1>
          <p class="intro__lead">
            Une mini-série sur l’art de <span class="accent">rater</span> ses négociations — puis d’apprendre.
          </p>

          <div class="intro__cta">
            <button class="btn btn--primary" id="btnStart">
              Lancer l’épisode 1 <span class="btn__arrow">→</span>
            </button>
            <button class="btn btn--ghost" id="btnResume" disabled>Reprendre</button>
          </div>

          <div class="intro__mini">
            <div class="miniCard">
              <div class="miniCard__t">Ce que tu vas voir</div>
              <div class="miniCard__p">Des erreurs réalistes, du silence, et la version “bien faite”.</div>
            </div>
            <div class="miniCard">
              <div class="miniCard__t">Règle d’or</div>
              <div class="miniCard__p">Celui qui parle le plus… perd le contrôle.</div>
            </div>
            <div class="miniCard">
              <div class="miniCard__t">Raccourcis</div>
              <div class="miniCard__p"><kbd>←</kbd><kbd>→</kbd> • <kbd>N</kbd> • <kbd>F</kbd> • <kbd>M</kbd></div>
            </div>
          </div>
        </div>

        <!-- Teaser rail -->
        <div class="intro__rail">
          <div class="railHead">
            <div class="railHead__t">Épisodes</div>
            <div class="railHead__s">progression • watchlist • fin</div>
          </div>

          <div class="teaserList" id="teaserList"></div>

          <div class="intro__note muted">
            XP Studio Productions • © 2025
          </div>
        </div>

        <!-- Floating “popups” (cinema micro UI) -->
        <div class="pop pop--1">
          <div class="pop__dot"></div>
          <div class="pop__txt">“OK… on peut envisager une remise… <b>si</b>…”</div>
        </div>
        <div class="pop pop--2">
          <div class="pop__dot"></div>
          <div class="pop__txt"><b>Silence.</b> (3 secondes) → l’autre parle.</div>
        </div>
        <div class="pop pop--3">
          <div class="pop__dot"></div>
          <div class="pop__txt">Une concession = un <b>échange</b>. Jamais gratuit.</div>
        </div>
      </div>
    </section>

    <!-- PLAYER -->
    <section class="view" id="viewPlayer" data-view="player">
      <div class="grid">

        <!-- Stage -->
        <section class="stage">
          <div class="stage__header">
            <div class="stage__titles">
              <div class="stage__ep" id="stageEp">EP 1</div>
              <h2 class="stage__title" id="stageTitle">Titre</h2>
              <p class="stage__line brush" id="stageLine">Punchline</p>
            </div>

            <div class="stage__actions">
              <button class="iconBtn" id="btnPrev" aria-label="Épisode précédent">←</button>
              <button class="iconBtn" id="btnNext" aria-label="Épisode suivant">→</button>
              <button class="iconBtn iconBtn--wide" id="btnEpisodes" aria-label="Ouvrir la liste des épisodes">
                Épisodes
              </button>
              <button class="iconBtn" id="btnFocus" aria-label="Mode Focus">F</button>
            </div>
          </div>

          <div class="playerWrap">
            <div class="playerFrame" id="player"></div>

            <div class="playerOverlay" id="playerOverlay" aria-hidden="true">
              <div class="playerOverlay__inner">
                <div class="brush playerOverlay__t">Silence.</div>
                <div class="playerOverlay__s">Tu tiens le rythme. Pas l’autre.</div>
              </div>
            </div>

            <div class="playerFooter">
              <a class="btn btn--ghost btn--small" target="_blank" rel="noreferrer" id="btnOpenYoutube" href="#">
                Ouvrir sur YouTube ↗
              </a>
              <span class="muted playerFooter__hint">Qualité : YouTube adapte selon réseau/appareil.</span>
            </div>
          </div>

          <div class="panel">
            <div class="panel__head">
              <div class="panel__t">Ce que Max aurait dû faire</div>
              <div class="panel__meta" id="watchedBadge"></div>
            </div>
            <ul class="panel__list" id="takeawaysList"></ul>

            <div class="panel__cta">
              <button class="btn btn--secondary" id="btnMarkWatched">Marquer comme “vu”</button>
              <button class="btn btn--primary" id="btnNextCta">Épisode suivant <span class="btn__arrow">→</span></button>
            </div>

            <div class="muted panel__tiny">
              La progression est manuelle (watchlist). Coche “vu” quand tu veux.
            </div>
          </div>
        </section>

        <!-- Rail -->
        <aside class="rail" id="rail">
          <div class="rail__top">
            <div class="rail__title">Épisodes</div>
            <div class="rail__sub muted">ordre • logique • tension</div>
          </div>

          <nav class="episodeList" id="episodeList" aria-label="Liste des épisodes"></nav>

          <div class="rail__bottom">
            <div class="statusChip">
              <span class="statusDot"></span>
              <span id="railStatus">En cours</span>
            </div>
            <button class="ghostChip ghostChip--full" id="btnCloseRail">Fermer</button>
          </div>
        </aside>

      </div>
    </section>

    <!-- DONE -->
    <section class="view" id="viewDone" data-view="done">
      <div class="done">
        <div class="done__card">
          <div class="done__k">FIN • MINI-SÉRIE</div>
          <h2 class="done__title brush">SPOILER</h2>
          <p class="done__lead">Merci d’avoir regardé jusqu’au bout.</p>
          <p class="done__text">
            Tu sais maintenant négocier — ou au minimum, ne plus te saboter.
            Le reste, c’est du cadre… et du silence.
          </p>

          <div class="done__stats">
            <div class="stat">
              <div class="stat__k">Progression</div>
              <div class="stat__v" id="doneProgress">9/9 • 100%</div>
            </div>
            <div class="stat">
              <div class="stat__k">Revoir</div>
              <div class="stat__v">Choisis un épisode à relancer</div>
            </div>
          </div>

          <div class="done__actions">
            <button class="btn btn--primary" id="btnRewatch">Choisir un épisode <span class="btn__arrow">→</span></button>
            <button class="btn btn--ghost" id="btnBackHome">Retour accueil</button>
          </div>

          <div class="done__grid" id="doneEpisodeGrid"></div>

          <div class="muted done__foot">Tu peux reset en haut à droite.</div>
        </div>
      </div>
    </section>

  </main>

  <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <script src="app.js"></script>
</body>
</html>
